<!DOCTYPE html>
<html lang="he">
<head>
<meta charset="UTF-8">
<title>תור משחקים</title>
<style>
  body { font-family: Arial, sans-serif; direction: rtl; text-align: center; margin-top: 50px; }
  #queue { margin-top: 20px; }
  .child { margin: 5px 0; }
  .current { font-weight: bold; color: green; }
</style>
</head>
<body>

<h1>מערכת תורים למחשב</h1>

<div>
  <input type="text" id="childName" placeholder="הכנס שם ילד">
  <input type="number" id="childTime" placeholder="זמן בדקות" min="1">
  <button onclick="addChild()">הוסף לתור</button>
</div>

<h2>שחקן נוכחי: <span id="currentChild">-</span></h2>
<h3>זמן נותר: <span id="timeLeft">-</span></h3>

<h2>תור הילדים:</h2>
<div id="queue"></div>

<button onclick="startGame()">התחל משחק</button>

<script>
let queue = [];
let currentChild = null;
let timer;

// הוספת ילד עם זמן
function addChild() {
    const name = document.getElementById("childName").value.trim();
    const time = parseInt(document.getElementById("childTime").value);
    if (name && time > 0) {
        queue.push({name: name, time: time});
        document.getElementById("childName").value = "";
        document.getElementById("childTime").value = "";
        updateQueueDisplay();
    }
}

function updateQueueDisplay() {
    const queueDiv = document.getElementById("queue");
    queueDiv.innerHTML = "";
    queue.forEach((child, index) => {
        const div = document.createElement("div");
        div.className = "child";
        div.textContent = `${index + 1}. ${child.name} - ${child.time} דקות`;
        queueDiv.appendChild(div);
    });
}

function startGame() {
    if (queue.length === 0) {
        alert("אין ילדים בתור!");
        return;
    }
    nextChild();
}

function nextChild() {
    if (queue.length === 0) {
        document.getElementById("currentChild").textContent = "-";
        document.getElementById("timeLeft").textContent = "-";
        alert("כולם סיימו לשחק!");
        return;
    }

    currentChild = queue.shift();
    document.getElementById("currentChild").textContent = currentChild.name;
    updateQueueDisplay();

    let secondsLeft = currentChild.time * 60; // המרה לדקות
    document.getElementById("timeLeft").textContent = secondsLeft;

    timer = setInterval(() => {
        secondsLeft--;
        document.getElementById("timeLeft").textContent = secondsLeft;
        if (secondsLeft <= 0) {
            clearInterval(timer);
            nextChild();
        }
    }, 1000);
}
</script>

</body>
</html>
